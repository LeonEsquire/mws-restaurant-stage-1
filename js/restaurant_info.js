var map,restaurant=void 0,isFirstTimeOnPage=!0,places=["https://maps.googleapis.com/maps/api/staticmap?center=171+E+Broadway,+New+York,+NY+10002&zoom=16&scale=1&size=640x640&maptype=roadmap&key=AIzaSyCzBUgWVVOxeKk8LbADaNMvNwuvrXZPJ2Y&format=png&visual_refresh=true&markers=size:mid%7Ccolor:0xff0000%7Clabel:%7C171+E+Broadway,+New+York,+NY+10002","https://maps.googleapis.com/maps/api/staticmap?center=919+Fulton+St,+Brooklyn,+NY+11238&zoom=16&scale=1&size=640x640&maptype=roadmap&key=AIzaSyCzBUgWVVOxeKk8LbADaNMvNwuvrXZPJ2Y&format=png&visual_refresh=true&markers=size:mid%7Ccolor:0xff0000%7Clabel:%7C919+Fulton+St,+Brooklyn,+NY+11238","https://maps.googleapis.com/maps/api/staticmap?center=1+E+32nd+St,+New+York,+NY+10016&zoom=16&scale=1&size=640x640&maptype=roadmap&key=AIzaSyCzBUgWVVOxeKk8LbADaNMvNwuvrXZPJ2Y&format=png&visual_refresh=true&markers=size:mid%7Ccolor:0xff0000%7Clabel:%7C1+E+32nd+St,+New+York,+NY+10016","https://maps.googleapis.com/maps/api/staticmap?center=205+E+Houston+St,+New+York,+NY+10002&zoom=16&scale=1&size=640x640&maptype=roadmap&key=AIzaSyCzBUgWVVOxeKk8LbADaNMvNwuvrXZPJ2Y&format=png&visual_refresh=true&markers=size:mid%7Ccolor:0xff0000%7Clabel:%7C205+E+Houston+St,+New+York,+NY+10002","https://maps.googleapis.com/maps/api/staticmap?center=261+Moore+St,+Brooklyn,+NY+11206&zoom=16&scale=1&size=640x640&maptype=roadmap&key=AIzaSyCzBUgWVVOxeKk8LbADaNMvNwuvrXZPJ2Y&format=png&visual_refresh=true&markers=size:mid%7Ccolor:0xff0000%7Clabel:%7C261+Moore+St,+Brooklyn,+NY+11206","https://maps.googleapis.com/maps/api/staticmap?center=454+Van+Brunt+St,+Brooklyn,+NY+11231&zoom=16&scale=1&size=640x640&maptype=roadmap&key=AIzaSyCzBUgWVVOxeKk8LbADaNMvNwuvrXZPJ2Y&format=png&visual_refresh=true&markers=size:mid%7Ccolor:0xff0000%7Clabel:%7C454+Van+Brunt+St,+Brooklyn,+NY+11231","https://maps.googleapis.com/maps/api/staticmap?center=430+E+9th+St,+New+York,+NY+10009&zoom=16&scale=1&size=640x640&maptype=roadmap&key=AIzaSyCzBUgWVVOxeKk8LbADaNMvNwuvrXZPJ2Y&format=png&visual_refresh=true&markers=size:mid%7Ccolor:0xff0000%7Clabel:%7C430+E+9th+St,+New+York,+NY+10009","https://maps.googleapis.com/maps/api/staticmap?center=131+Sullivan+St,+New+York,+NY+10012&zoom=16&scale=1&size=640x640&maptype=roadmap&key=AIzaSyCzBUgWVVOxeKk8LbADaNMvNwuvrXZPJ2Y&format=png&visual_refresh=true&markers=size:mid%7Ccolor:0xff0000%7Clabel:%7C131+Sullivan+St,+New+York,+NY+10012","https://maps.googleapis.com/maps/api/staticmap?center=1209+Jackson+Ave,+Queens,+NY+11101&zoom=16&scale=1&size=640x640&maptype=roadmap&key=AIzaSyCzBUgWVVOxeKk8LbADaNMvNwuvrXZPJ2Y&format=png&visual_refresh=true&markers=size:mid%7Ccolor:0xff0000%7Clabel:%7C1209+Jackson+Ave,+Queens,+NY+11101","https://maps.googleapis.com/maps/api/staticmap?center=5-48+49th+Ave,+Queens,+NY+11101&zoom=16&scale=1&size=640x640&maptype=roadmap&key=AIzaSyCzBUgWVVOxeKk8LbADaNMvNwuvrXZPJ2Y&format=png&visual_refresh=true&markers=size:mid%7Ccolor:0xff0000%7Clabel:%7C5-48+49th+Ave,+Queens,+NY+11101"];document.addEventListener("DOMContentLoaded",function(){fetchRestaurantFromURL(function(e,a){if(e)console.error(e);else{fillBreadcrumb();var t=document.querySelector("#map-image");t.src=places[self.restaurant.id-1],t.onclick=function(e){e.preventDefault();var a=document.querySelector("body"),t=document.createElement("script");t.src="https://maps.googleapis.com/maps/api/js?libraries=places&callback=initMap",t.setAttribute("defer","defer"),t.setAttribute("async","async"),a.append(t),e.target.remove()}}})}),window.initMap=function(){fetchRestaurantFromURL(function(e,a){e?console.error(e):(self.map=new google.maps.Map(document.getElementById("map"),{zoom:16,center:a.latlng,scrollwheel:!1}),DBHelper.mapMarkerForRestaurant(self.restaurant,self.map))})},fetchRestaurantFromURL=function(t){if(self.restaurant)t(null,self.restaurant);else{var e=getParameterByName("id");e?DBHelper.fetchRestaurantById(e,function(e,a){(self.restaurant=a)?(fillRestaurantHTML(),t(null,a)):console.error(e)}):(error="No restaurant id in URL",t(error,null))}},fillRestaurantHTML=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:self.restaurant;document.getElementById("restaurant-name").innerHTML=e.name,document.getElementById("restaurant-address").innerHTML=e.address;var a=document.getElementById("restaurant-img"),t=DBHelper.imageUrlForRestaurant(e),r=DBHelper.lowerResolutionImage(e);a.setAttribute("alt",e.name+" Restaurant"),a.src=t,a.sizes="(min-width: 767px) 40vw, 84vw",a.srcset=t+" 800w, "+r+" 400w",a.alt=""+e.name,a.className="restaurant-img",document.getElementById("restaurant-cuisine").innerHTML=e.cuisine_type,e.operating_hours&&fillRestaurantHoursHTML(),fillReviewsHTML()},fillRestaurantHoursHTML=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:self.restaurant.operating_hours,a=document.getElementById("restaurant-hours");for(var t in e){var r=document.createElement("tr"),n=document.createElement("td");n.innerHTML=t,r.appendChild(n);var o=document.createElement("td");o.innerHTML=e[t],r.appendChild(o),a.appendChild(r)}},fillReviewsHTML=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:self.restaurant.reviews,a=document.getElementById("reviews-container"),t=document.createElement("h3");if(t.innerHTML="Reviews",a.appendChild(t),!e){var r=document.createElement("p");return r.innerHTML="No reviews yet!",void a.appendChild(r)}var n=document.getElementById("reviews-list");e.forEach(function(e){n.appendChild(createReviewHTML(e))}),a.appendChild(n),isFirstTimeOnPage&&(document.getElementById("main-title").focus(),isFirstTimeOnPage=!1)},createReviewHTML=function(e){var a=document.createElement("li"),t=document.createElement("div");t.className="review-header",a.appendChild(t);var r=document.createElement("p");r.innerHTML=e.name,a.appendChild(r);var n=document.createElement("p");n.innerHTML=e.date,a.appendChild(n);var o=document.createElement("p");o.innerHTML='<span class="tags">Rating: '+e.rating+"</span>",a.appendChild(o);var s=document.createElement("p");return s.innerHTML=e.comments,a.appendChild(s),a},fillBreadcrumb=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:self.restaurant,a=document.getElementById("breadcrumb"),t=document.createElement("li"),r=document.createElement("a");r.setAttribute("aria-current","page"),r.href="#",r.innerHTML=e.name,t.appendChild(r),a.appendChild(t)},getParameterByName=function(e,a){a||(a=window.location.href),e=e.replace(/[\[\]]/g,"\\$&");var t=new RegExp("[?&]"+e+"(=([^&#]*)|&|#|$)").exec(a);return t?t[2]?decodeURIComponent(t[2].replace(/\+/g," ")):"":null};
